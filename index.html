<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>習慣化アプリ</title>
      <style>
body {
    font-family: 'Arial', sans-serif; /* 読みやすいフォントファミリーを指定 */
    line-height: 1.6; /* 行の高さを調整して、文字を読みやすくする */
    margin: 20px; /* ページの周囲に余白を追加 */
    background-color: #f4f4f4; /* 少し薄いグレーの背景色を設定 */
    color: #333; /* 基本的な文字色を濃いグレーに設定 */
}

h1, h2 {
    color: #555; /* 見出しの色を設定 */
    border-bottom: 2px solid #ccc; /* 見出しの下に線を引く */
    padding-bottom: 5px; /* 見出しの文字と線との間に余白 */
    margin-bottom: 20px; /* 見出しの下に余白 */
}

/* フォームと記録エリアの各セクション */
div {
    margin-bottom: 20px; /* 各セクションの下に余白 */
    padding: 15px; /* セクションの内側に余白 */
    background-color: #fff; /* セクションの背景色を白に */
    border-radius: 8px; /* セクションの角を丸くする */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* セクションに軽い影をつける */
}

label {
    display: inline-block; /* インライン要素だが、幅や上下の余白などを設定可能に */
    margin-bottom: 8px; /* ラベルの下に余白 */
    font-weight: bold; /* 文字を太くする */
    margin-right: 10px; /* ラベルと入力フィールドの間に余白 */
}

input[type="number"],
input[type="text"] {
    padding: 10px; /* 入力欄の内側に余白 */
    margin-right: 5px; /* 入力欄の右に余白 */
    border: 1px solid #ccc; /* 入力欄のボーダー */
    border-radius: 4px; /* 入力欄の角を丸くする */
    font-size: 1rem; /* フォントサイズ */
}

button {
    padding: 10px 20px; /* ボタンの内側に余白 */
    background-color: #5cb85c; /* ボタンの背景色 (緑) */
    color: white; /* ボタンの文字色を白に */
    border: none; /* ボタンのボーダーをなくす */
    border-radius: 4px; /* ボタンの角を丸くする */
    cursor: pointer; /* カーソルをポインターに変更して、クリックできることを示す */
    font-size: 1rem; /* フォントサイズ */
    margin-top: 10px; /* ボタンの上に余白 */
    transition: background-color 0.3s ease; /* ホバー時の色変化を滑らかにする */
}

button:hover {
    background-color: #4cae4c; /* ボタンにカーソルを合わせたときの背景色 */
}

/* 記録表示エリア全体のスタイル（必要に応じて） */
#record-area {
     /* div タグのスタイルが適用されます */
}

/* 個々の記録項目（JavaScriptで追加される予定の要素）のスタイル */
.record-item {
    background-color: #e9e9e9; /* 記録項目の背景色 */
    padding: 10px; /* 記録項目の内側に余白 */
    margin-bottom: 8px;
    border-radius: 4px;
    border: 1px solid #ddd;
    word-break: break-all; /* 長い内容でも改行されるように */
    display: flex; /* 記録内容とボタンを横並びにする */
    justify-content: space-between; /* 記録内容とボタンを両端に配置 */
    align-items: center; /* 縦方向の中央揃え */
}

/* 削除ボタンのスタイル */
.delete-button {
    padding: 5px 10px; /* ボタンの内側に余白 */
    background-color: #d9534f; /* ボタンの背景色 (赤) */
    color: white; /* ボタンの文字色を白に */
    border: none; /* ボタンのボーダーをなくす */
    border-radius: 4px; /* ボタンの角を丸くする */
    cursor: pointer; /* カーソルをポインターに変更 */
    font-size: 0.8rem; /* フォントサイズを小さく */
    margin-left: 10px; /* 記録内容との間に余白 */
    flex-shrink: 0; /* 内容が長くなってもボタンのサイズを縮小しない */
    transition: background-color 0.3s ease; /* ホバー時の色変化を滑らかにする */
}

.delete-button:hover {
    background-color: #c9302c; /* ホバー時の背景色 */
}


@media (max-width: 600px) {
    body {
        margin: 10px;
    }
    div {
        padding: 10px;
    }
    input[type="number"],
    input[type="text"],
    button {
        font-size: 0.9rem;
    }
    .delete-button {
        font-size: 0.7rem; /* スマートフォンではさらに小さく */
        padding: 3px 6px;
    }
}

      </style>
</head>
<body>

    <h1>資格勉強 習慣化アプリ</h1>

    <div>
        <h2>記録する</h2>
        <div>
            <label for="study-time">勉強時間:</label>
            <input type="number" id="study-time" min="0" value="0"> 分
        </div>
        <button id="record-button">記録する</button>
    </div>

    <div id="record-area">
        <h2>過去の記録</h2>
        <div id="records-list">
            </div>
    </div>

    <script>
        // HTML要素への参照を取得
        const studyTimeInput = document.getElementById('study-time');
        const recordButton = document.getElementById('record-button');
        const recordsList = document.getElementById('records-list');

        // ローカルストレージにデータを保存する際のキー名
        const STORAGE_KEY = 'qualificationStudyRecords';

        // --- 関数定義 ---

        // 現在の日付をYYYY-MM-DD 形式で取得する関数
        function getCurrentDate() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0'); // 月は0から始まるため+1し、2桁にパディング
            const day = String(now.getDate()).padStart(2, '0'); // 日を2桁にパディング
            return `${year}-${month}-${day}`;
        }

        // ローカルストレージから記録データを読み込む関数
        function loadRecords() {
            const recordsJson = localStorage.getItem(STORAGE_KEY);
            if (recordsJson) {
                // JSON形式の文字列をJavaScriptの配列に変換して返す
                return JSON.parse(recordsJson);
            }
            // データがなければ空の配列を返す
            return [];
        }

        // 記録データをローカルストレージに保存する関数
        function saveRecords(records) {
            // JavaScriptの配列をJSON形式の文字列に変換して保存
            localStorage.setItem(STORAGE_KEY, JSON.stringify(records));
        }

        // 指定されたインデックスの記録を削除する関数
        function deleteRecord(indexToDelete) {
            const records = loadRecords(); // 最新の記録を読み込む

            // 指定されたインデックスの項目を配列から削除
            // splice(開始インデックス, 削除する要素数)
            records.splice(indexToDelete, 1);

            saveRecords(records); // 変更した配列をローカルストレージに保存
            renderRecords(); // 記録リストを再描画して画面を更新
        }


        // 記録リストを表示エリアに描画する関数
        function renderRecords() {
            // 既存の表示内容をクリア
            recordsList.innerHTML = '';

            // ローカルストレージから最新の記録を読み込む
            const records = loadRecords();

            if (records.length === 0) {
                recordsList.innerHTML = '<div class="record-item">まだ記録がありません。</div>';
                return;
            }

            // 各記録項目を表示
            // 配列のインデックスを記録項目と一緒に渡すことで、削除時にどの項目かを特定できるようにします
            records.forEach((record, index) => {
                const recordItem = document.createElement('div');
                recordItem.classList.add('record-item'); // CSSでスタイルを適用するためにクラスを追加

                // 記録内容を表示する要素を作成
                const recordContent = document.createElement('span');
                recordContent.textContent = `${record.date}: ${record.time} 分`; // 例: "2023-10-27: 60 分"
                // 他の項目があればここに追加して表示
                // if (record.content) {
                //     recordContent.textContent += ` (${record.content})`;
                // }

                // 削除ボタンを作成
                const deleteButton = document.createElement('button');
                deleteButton.textContent = '削除';
                deleteButton.classList.add('delete-button'); // CSSでスタイルを適用

                // 削除ボタンにクリックイベントリスナーを追加
                // どの記録項目に対応するボタンか分かるように、forEachのindexを渡します
                deleteButton.addEventListener('click', () => {
                    // 削除確認ダイアログを表示
                    if (confirm('この記録を削除してもよろしいですか？')) {
                         deleteRecord(index); // 確認後、削除関数を呼び出す
                    }
                });

                // 記録内容と削除ボタンを記録項目に追加
                recordItem.appendChild(recordContent);
                recordItem.appendChild(deleteButton);


                recordsList.appendChild(recordItem); // 表示エリアに追加
            });
        }

        // --- イベントリスナー ---

        // 「記録する」ボタンがクリックされたときの処理
        recordButton.addEventListener('click', () => {
            const studyTime = parseInt(studyTimeInput.value, 10); // 入力値を整数に変換

            // 入力値のバリデーション (数値であり、0以上であることを確認)
            if (isNaN(studyTime) || studyTime < 0) {
                alert('勉強時間を正しく入力してください。');
                studyTimeInput.value = 0; // 不正な入力値をリセット
                return; // 処理を中断
            }

            const today = getCurrentDate(); // 今日の日付を取得

            // 新しい記録データを作成
            const newRecord = {
                date: today,
                time: studyTime,
                // 他の項目があればここに追加
                // content: studyContentInput.value // 例えば勉強内容入力欄がある場合
            };

            // 既存の記録データを読み込む
            const records = loadRecords();

            // 新しい記録を追加
            // ※ 同じ日の記録を複数追加したい場合はこのまま
            // ※ 同じ日の記録を上書きしたい場合は、records配列を検索して該当項目を更新する処理が必要
            records.push(newRecord);

            // 更新した記録データをローカルストレージに保存
            saveRecords(records);

            // 入力フィールドをクリア
            studyTimeInput.value = 0;
            // もし勉強内容入力欄があれば
            // studyContentInput.value = '';

            // 記録リストを再描画して画面を更新
            renderRecords();

            alert('記録しました！'); // 記録完了をユーザーに通知
        });

        // --- アプリの初期化 ---

        // ページが読み込まれたときに、ローカルストレージから記録を読み込んで表示する
        renderRecords();

    </script>

</body>
</html>
